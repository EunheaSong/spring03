<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
            crossorigin="anonymous"></script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <title>게시글 상세 페이지</title>
</head>
<style>
    body {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        background-color: aliceblue;

    }

    .post_box {
        width: 720px;
        border: 1px solid black;
        padding: 20px 10px 10px 10px;
        margin-top: 10px;
    }

    .title {

    }

    .text {
        width: 650px;
        height: 400px;
        margin-top: 10px;
        padding: 5px 5px 5px 5px;
        border: 1px solid black;
        background-color: white;
    }

    .text_box {
        width: 700px;
        height: 90%;

        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }

    .comments_box {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }

    .comment {
        margin-top: 10px;
        display: flex;
        flex-direction: row;
        justify-content: center;
        align-items: center;
    }

    .comment > button {
        margin-left: 5px;
    }

</style>
<script>
    function nocomment(i,j){
        let comments = $('#comments').val();
        let boardId = i;
        let userId = j;
        let data = {'comments' : comments, 'boardId': boardId, 'userId': userId}
        if (comments===""){
            alert("내용을 입력해주세요!");
            return;
        } else {
            $.ajax({
                type: "POST",
                url: "/board/reply",
                contentType: "application/json", // JSON 형식으로 전달함을 알리기
                data: JSON.stringify(data),
                success: function (response) {
                    alert('덧글 등록!');
                    window.location.reload();
                }

            });
        }
    }
</script>
<body>
    <h1>게시글 상세페이지</h1>
    <div class="post_box">
        <div>
            <p th:text="${boardDetail.title}" class="title">제목</p>
            <hr/>
            <span th:text="${boardDetail.name}" class="name">작성자</span>
            <hr/>
            <span th:text="${boardDetail.modifiedAt}" style="font-size: 10pt">시간</span>
        </div>
        <div class="text_box" >
            <div th:text="${boardDetail.content}" class="text">
                내용
            </div>
        </div>
        <div class="comments_box">
            <div class="comment">
                <form>
                    <textarea id="comments" placeholder="메세지를 남겨보세요!" style=" resize: none; width: 500px;" onkeydown="resize(this)" onkeyup="resize(this)"></textarea>
                    <button type="button" class="btn btn-dark" th:onclick="|javascript:nocomment('${boardDetail.id}','${boardDetail.userId}')|">등록</button>
                </form>

            </div>
            <div>
                덧글목록
            </div>
        </div>
        <button onclick="window.history.back()">뒤로가기</button>
    </div>


</body>
</html>